(function(n){var u,i=this,r=i.document,tt=n(r),s=n(i),y=Array.prototype,it=!0,st=3e4,b=!1,l=navigator.userAgent.toLowerCase(),rt=i.location.hash.replace(/#\//,""),e=function(){},ht=function(){return!1},f=function(){var n=3,t=r.createElement("div"),i=t.getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->";while(i[0]);return n>4?n:u}(),o=function(){return{html:r.documentElement,body:r.body,head:r.getElementsByTagName("head")[0],title:r.title}},w=i.parent!==i.self,ct="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",ut=function(){var t=[];return n.each(ct.split(" "),function(n,i){t.push(i),/_/.test(i)&&t.push(i.replace(/_/g,""))}),t}(),ft=function(t){var i;return typeof t!="object"?t:(n.each(t,function(r,u){/^[a-z]+_/.test(r)&&(i="",n.each(r.split("_"),function(n,t){i+=n>0?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[i]=u,delete t[r])}),t)},k=function(t){return n.inArray(t,ut)>-1?Galleria[t.toUpperCase()]:t},p={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(n){return"http://www.youtube.com/embed/"+n},getThumb:function(t,r,u){u=u||e,n.getJSON(i.location.protocol+"//gdata.youtube.com/feeds/api/videos/"+t+"?v=2&alt=json-in-script&callback=?",function(n){try{r(n.entry.media$group.media$thumbnail[0].url)}catch(t){u()}}).error(u)}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(n){return"http://player.vimeo.com/video/"+n},getThumb:function(t,i,r){r=r||e,n.getJSON("http://vimeo.com/api/v2/video/"+t+".json?callback=?",function(n){try{i(n[0].thumbnail_medium)}catch(t){r()}}).error(r)}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(n){return"http://www.dailymotion.com/embed/video/"+n},getThumb:function(t,i,r){r=r||e,n.getJSON("https://api.dailymotion.com/video/"+t+"?fields=thumbnail_medium_url&callback=?",function(n){try{i(n.thumbnail_medium_url)}catch(t){r()}}).error(r)}}},et=function(n){var t,i;for(i in p)if(t=n&&n.match(p[i].reg),t&&t.length)return{id:t[2],provider:i};return!1},h={support:function(){var n=o().html;return!w&&(n.requestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullScreen)}(),callback:e,enter:function(n,t,i){this.instance=n,this.callback=t||e,i=i||o().html,i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(n){this.callback=n||e,r.exitFullscreen?r.exitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitCancelFullScreen&&r.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var n=function(){if(h.instance){var n=h.instance._fullscreen;r.fullscreen||r.mozFullScreen||r.webkitIsFullScreen?n._enter(h.callback):n._exit(h.callback)}};r.addEventListener("fullscreenchange",n,!1),r.addEventListener("mozfullscreenchange",n,!1),r.addEventListener("webkitfullscreenchange",n,!1)}}},d=[],v=[],ot=!1,c=!1,g=[],nt=function(t){Galleria.theme=t,n.each(g,function(n,t){t._initialized||t._init.call(t)}),g=[]},t=function(){return{clearTimer:function(t){n.each(Galleria.get(),function(){this.clearTimer(t)})},addTimer:function(t){n.each(Galleria.get(),function(){this.addTimer(t)})},array:function(n){return y.slice.call(n,0)},create:function(n,t){t=t||"div";var i=r.createElement(t);return i.className=n,i},removeFromArray:function(t,i){return n.each(t,function(n,r){if(r==i)return t.splice(n,1),!1}),t},getScriptPath:function(t){t=t||n("script:last").attr("src");var i=t.split("/");return i.length==1?"":(i.pop(),i.join("/")+"/")},animate:function(){var a=function(n){var r="transition WebkitTransition MozTransition OTransition".split(" "),t;if(i.opera)return!1;for(t=0;r[t];t++)if(typeof n[r[t]]!="undefined")return r[t];return!1}((r.body||r.documentElement).style),v={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[a],s={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},f=function(t,i,r){var u={};r=r||"transition",n.each("webkit moz ms o".split(" "),function(){u["-"+this+"-"+r]=i}),t.css(u)},y=function(n){f(n,"none","transition"),Galleria.WEBKIT&&Galleria.TOUCH&&(f(n,"translate3d(0,0,0)","transform"),n.data("revert")&&(n.css(n.data("revert")),n.data("revert",null)))},h,o,p,w,c,u,l;return function(r,b,k){if(k=n.extend({duration:400,complete:e,stop:!1},k),r=n(r),!k.duration){r.css(b),k.complete.call(r[0]);return}if(!a){r.animate(b,k);return}if(k.stop&&(r.unbind(v),y(r)),h=!1,n.each(b,function(n,i){l=r.css(n),t.parseValue(l)!=t.parseValue(i)&&(h=!0),r.css(n,l)}),!h){i.setTimeout(function(){k.complete.call(r[0])},k.duration);return}o=[],p=k.easing in s?s[k.easing]:s._default,w=" "+k.duration+"ms cubic-bezier("+p.join(",")+")",i.setTimeout(function(i,r,e,s){return function(){i.one(r,function(n){return function(){y(n),k.complete.call(n[0])}}(i));Galleria.WEBKIT&&Galleria.TOUCH&&(c={},u=[0,0,0],n.each(["left","top"],function(n,r){r in e&&(u[n]=t.parseValue(e[r])-t.parseValue(i.css(r))+"px",c[r]=e[r],delete e[r])}),(u[0]||u[1])&&(i.data("revert",c),o.push("-webkit-transform"+s),f(i,"translate3d("+u.join(",")+")","transform"))),n.each(e,function(n){o.push(n+s)}),f(i,o.join(",")),i.css(e)}}(r,v,b,w),2)}}(),removeAlpha:function(n){if(f<9&&n){var t=n.style,i=n.currentStyle,r=i&&i.filter||t.filter||"";/alpha/.test(r)&&(t.filter=r.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,i){t=n(t),t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style"),t.css(i)},revertStyles:function(){n.each(t.array(arguments),function(t,i){i=n(i),i.removeAttr("style"),i.attr("style",""),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(n){t.forceStyles(n,{position:"absolute",left:-1e4})},moveIn:function(){t.revertStyles.apply(t,t.array(arguments))},elem:function(t){return t instanceof n?{$:t,dom:t[0]}:{$:n(t),dom:t}},hide:function(n,i,r){var o,u,s,h;r=r||e,o=t.elem(n),u=o.$,n=o.dom,u.data("opacity")||u.data("opacity",u.css("opacity")),s={opacity:0},i?(h=f<9&&n?function(){t.removeAlpha(n),n.style.visibility="hidden",r.call(n)}:r,t.animate(n,s,{duration:i,complete:h,stop:!0})):f<9&&n?(t.removeAlpha(n),n.style.visibility="hidden"):u.css(s)},show:function(n,i,r){var s,o,h,u,c;r=r||e,s=t.elem(n),o=s.$,n=s.dom,h=parseFloat(o.data("opacity"))||1,u={opacity:h},i?(f<9&&(o.css("opacity",0),n.style.visibility="visible"),c=f<9&&n?function(){u.opacity==1&&t.removeAlpha(n),r.call(n)}:r,t.animate(n,u,{duration:i,complete:c,stop:!0})):f<9&&u.opacity==1&&n?(t.removeAlpha(n),n.style.visibility="visible"):o.css(u)},optimizeTouch:function(){var t,i,u,r,f={},e=function(t){t.preventDefault(),f=n.extend({},t,!0)},o=function(){this.evt=f},s=function(){this.handler.call(t,this.evt)};return function(f){n(f).bind("touchend",function(f){for(t=f.target,r=!0;t.parentNode&&t!=f.currentTarget&&r;)i=n(t).data("events"),u=n(t).data("fakes"),i&&"click"in i?(r=!1,f.preventDefault(),n(t).click(e).click(),i.click.pop(),n.each(i.click,o),n(t).data("fakes",i.click),delete i.click):u&&(r=!1,f.preventDefault(),n.each(u,s)),t=t.parentNode})}}(),wait:function(r){r=n.extend({until:ht,success:e,error:function(){Galleria.raise("Could not complete wait function.")},timeout:3e3},r);var f=t.timestamp(),o,u,s=function(){if(u=t.timestamp(),o=u-f,r.until(o))return r.success(),!1;if(typeof r.timeout=="number"&&u>=f+r.timeout)return r.error(),!1;i.setTimeout(s,10)};i.setTimeout(s,10)},toggleQuality:function(n,t){(f===7||f===8)&&n&&n.nodeName.toUpperCase()=="IMG"&&(typeof t=="undefined"&&(t=n.style.msInterpolationMode==="nearest-neighbor"),n.style.msInterpolationMode=t?"bicubic":"nearest-neighbor")},insertStyleTag:function(t,i){var u,f;i&&n("#"+i).length||(u=r.createElement("style"),i&&(u.id=i),o().head.appendChild(u),u.styleSheet?u.styleSheet.cssText=t:(f=r.createTextNode(t),u.appendChild(f)))},loadScript:function(t,i){var u=!1,r=n("<script>").attr({src:t,async:!0}).get(0);r.onload=r.onreadystatechange=function(){u||this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(u=!0,r.onload=r.onreadystatechange=null,typeof i=="function"&&i.call(this,this))},o().head.appendChild(r)},parseValue:function(n){if(typeof n=="number")return n;if(typeof n=="string"){var t=n.match(/\-?\d|\./g);return t&&t.constructor===Array?t.join("")*1:0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(i,s,h){var c,v,l,a;if(n("link[rel=stylesheet]").each(function(){if(new RegExp(i).test(this.href))return c=this,!1}),typeof s=="function"&&(h=s,s=u),h=h||e,c)return h.call(c,c),c;if(v=r.styleSheets.length,n("#"+s).length)n("#"+s).attr("href",i),v--;else if(c=n("<link>").attr({rel:"stylesheet",href:i,id:s}).get(0),l=n('link[rel="stylesheet"], style'),l.length?l.get(0).parentNode.insertBefore(c,l[0]):o().head.appendChild(c),f&&v>=31){Galleria.raise("You have reached the browser stylesheet limit (31)",!0);return}return typeof h=="function"&&(a=n("<s>").attr("id","galleria-loader").hide().appendTo(o().body),t.wait({until:function(){return a.height()==1},success:function(){a.remove(),h.call(c,c)},error:function(){a.remove(),Galleria.raise("Theme CSS could not load after 20 sec. "+(Galleria.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})),c}}}(),a=function(){var i=function(i,r,u,f){var s=this.getOptions("easing"),h=this.getStageWidth(),e={left:h*(i.rewind?-1:1)},o={left:0};u?(e.opacity=0,o.opacity=1):e.opacity=1,n(i.next).css(e),t.animate(i.next,o,{duration:i.speed,complete:function(n){return function(){r(),n.css({left:0})}}(n(i.next).add(i.prev)),queue:!1,easing:s}),f&&(i.rewind=!i.rewind),i.prev&&(e={left:0},o={left:h*(i.rewind?1:-1)},u&&(e.opacity=1,o.opacity=0),n(i.prev).css(e),t.animate(i.prev,o,{duration:i.speed,queue:!1,easing:s,complete:function(){n(this).css("opacity",0)}}))};return{active:!1,init:function(n,t,i){a.effects.hasOwnProperty(n)&&a.effects[n].call(this,t,i)},effects:{fade:function(i,r){n(i.next).css({opacity:0,left:0}),t.animate(i.next,{opacity:1},{duration:i.speed,complete:r}),i.prev&&(n(i.prev).css("opacity",1).show(),t.animate(i.prev,{opacity:0},{duration:i.speed}))},flash:function(i,r){n(i.next).css({opacity:0,left:0}),i.prev?t.animate(i.prev,{opacity:0},{duration:i.speed/2,complete:function(){t.animate(i.next,{opacity:1},{duration:i.speed,complete:r})}}):t.animate(i.next,{opacity:1},{duration:i.speed,complete:r})},pulse:function(i,r){i.prev&&n(i.prev).hide(),n(i.next).css({opacity:0,left:0}).show(),t.animate(i.next,{opacity:1},{duration:i.speed,complete:r})},slide:function(){i.apply(this,t.array(arguments))},fadeslide:function(){i.apply(this,t.array(arguments).concat([!0]))},doorslide:function(){i.apply(this,t.array(arguments).concat([!1,!0]))}}}}();h.listen(),Galleria=function(){var e=this,g,nt;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=u,this._binds=[],this._id=parseInt(Math.random()*1e4,10),g="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",nt="current total",n.each(g.split(" "),function(n,i){e._dom[i]=t.create("galleria-"+i)}),n.each(nt.split(" "),function(n,i){e._dom[i]=t.create("galleria-"+i,"span")});var k=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(n){var t=n.keyCode||n.which;t in k.map&&typeof k.map[t]=="function"&&k.map[t].call(e,n)},attach:function(n){var t,i;for(t in n)n.hasOwnProperty(t)&&(i=t.toUpperCase(),i in k.keys?k.map[k.keys[i]]=n[t]:k.map[i]=n[t]);k.bound||(k.bound=!0,tt.bind("keydown",k.press))},detach:function(){k.bound=!1,k.map={},tt.unbind("keydown",k.press)}},d=this._controls={0:u,1:u,active:0,swap:function(){d.active=d.active?0:1},getActive:function(){return d[d.active]},getNext:function(){return d[1-d.active]}},c=this._carousel={next:e.$("thumb-nav-right"),prev:e.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,r=[0];n.each(e._thumbnails,function(u,f){f.ready&&(t+=f.outerWidth||n(f.container).outerWidth(!0),r[u+1]=t,i=Math.max(i,f.outerHeight||n(f.container).outerHeight(!0)))}),e.$("thumbnails").css({width:t,height:i}),c.max=t,c.hooks=r,c.width=e.$("thumbnails-list").width(),c.setClasses(),e.$("thumbnails-container").toggleClass("galleria-carousel",t>c.width),c.width=e.$("thumbnails-list").width()},bindControls:function(){var n;c.next.bind("click",function(t){if(t.preventDefault(),e._options.carouselSteps==="auto"){for(n=c.current;n<c.hooks.length;n++)if(c.hooks[n]-c.hooks[c.current]>c.width){c.set(n-2);break}}else c.set(c.current+e._options.carouselSteps)}),c.prev.bind("click",function(t){if(t.preventDefault(),e._options.carouselSteps==="auto"){for(n=c.current;n>=0;n--)if(c.hooks[c.current]-c.hooks[n]>c.width){c.set(n+2);break}else if(n===0){c.set(0);break}}else c.set(c.current-e._options.carouselSteps)})},set:function(n){for(n=Math.max(n,0);c.hooks[n-1]+c.width>=c.max&&n>=0;)n--;c.current=n,c.animate()},getLast:function(n){return(n||c.current)-1},follow:function(n){if(n===0||n===c.hooks.length-2){c.set(n);return}for(var t=c.current;c.hooks[t]-c.hooks[c.current]<c.width&&t<=c.hooks.length;)t++;n-1<c.current?c.set(n-1):n+2>t&&c.set(n-t+c.current+2)},setClasses:function(){c.prev.toggleClass("disabled",!c.current),c.next.toggleClass("disabled",c.hooks[c.current]+c.width>=c.max)},animate:function(){c.setClasses();var n=c.hooks[c.current]*-1;isNaN(n)||t.animate(e.get("thumbnails"),{left:n},{duration:e._options.carouselSpeed,easing:e._options.easing,queue:!1})}},b=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+e._id,swapTimer:"swap"+e._id,init:function(){b.initialized=!0;t.insertStyleTag(".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}","galleria-tooltip"),e.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(n){var s=e.getMousePosition(n).x,f=e.getMousePosition(n).y,r=e.$("tooltip"),i=s,t=f,u=r.outerHeight(!0)+1,h=r.outerWidth(!0),o=u+15,c=e.$("container").width()-h-2,l=e.$("container").height()-u-2;isNaN(i)||isNaN(t)||(i+=10,t-=u+8,i=Math.max(0,Math.min(c,i)),t=Math.max(0,Math.min(l,t)),f<o&&(t=o),r.css({left:i,top:t}))},bind:function(t,i){if(!Galleria.TOUCH){b.initialized||b.init();var r=function(){e.$("container").unbind("mousemove",b.move),e.clearTimer(b.timer),e.$("tooltip").stop().animate({opacity:0},200,function(){e.$("tooltip").hide(),e.addTimer(b.swapTimer,function(){b.open=!1},1e3)})},u=function(t,i){b.define(t,i),n(t).hover(function(){e.clearTimer(b.swapTimer),e.$("container").unbind("mousemove",b.move).bind("mousemove",b.move).trigger("mousemove"),b.show(t),e.addTimer(b.timer,function(){e.$("tooltip").stop().show().animate({opacity:1}),b.open=!0},b.open?0:500)},r).click(r)};typeof i=="string"?u(t in e._dom?e.get(t):t,i):n.each(t,function(n,t){u(e.get(n),t)})}},show:function(t){t=n(t in e._dom?e.get(t):t);var r=t.data("tt"),u=function(n){i.setTimeout(function(n){return function(){b.move(n)}}(n),10),t.unbind("mouseup",u)};(r=typeof r=="function"?r():r,r)&&(e.$("tooltip").html(r.replace(/\s/,"&#160;")),t.bind("mouseup",u))},define:function(t,i){if(typeof i!="function"){var r=i;i=function(){return r}}t=n(t in e._dom?e.get(t):t).data("tt",i),b.show(t)}},y=this._fullscreen={scrolled:0,crop:u,active:!1,keymap:e._keyboard.map,parseCallback:function(t,i){return a.active?function(){typeof t=="function"&&t.call(e);var r=e._controls.getActive(),u=e._controls.getNext();e._scaleImage(u),e._scaleImage(r),i&&e._options.trueFullscreen&&n(r.container).add(u.container).trigger("transitionend")}:t},enter:function(n){n=y.parseCallback(n,!0),e._options.trueFullscreen&&h.support?(y.active=!0,t.forceStyles(e.get("container"),{width:"100%",height:"100%"}),e.rescale(),Galleria.MAC?!Galleria.WEBKIT||Galleria.SAFARI&&/version\/[1-5]/.test(l)?(e.$("stage").css("opacity",0),i.setTimeout(function(){y.scale(),e.$("stage").css("opacity",1)},4)):(e.$("container").css("opacity",0).addClass("fullscreen"),i.setTimeout(function(){y.scale(),e.$("container").css("opacity",1)},50)):e.$("container").addClass("fullscreen"),s.resize(y.scale),h.enter(e,n,e.get("container"))):(y.scrolled=s.scrollTop(),i.scrollTo(0,0),y._enter(n))},_enter:function(f){y.active=!0,w&&(y.iframe=function(){var f,e=r.referrer,t=r.createElement("a"),u=i.location;return(t.href=e,t.protocol!=u.protocol||t.hostname!=u.hostname||t.port!=u.port)?(Galleria.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(y.pd=i.parent.document,n(y.pd).find("iframe").each(function(){var n=this.contentDocument||this.contentWindow.document;if(n===r)return f=this,!1}),f)}()),t.hide(e.getActiveImage()),w&&y.iframe&&(y.iframe.scrolled=n(i.parent).scrollTop(),i.parent.scrollTo(0,0));var c=e.getData(),a=e._options,v=!e._options.trueFullscreen||!h.support,l={height:"100%",overflow:"hidden",margin:0,padding:0};if(v&&(e.$("container").addClass("fullscreen"),t.forceStyles(e.get("container"),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),t.forceStyles(o().html,l),t.forceStyles(o().body,l)),w&&y.iframe&&(t.forceStyles(y.pd.documentElement,l),t.forceStyles(y.pd.body,l),t.forceStyles(y.iframe,n.extend(l,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),y.keymap=n.extend({},e._keyboard.map),e.attachKeyboard({escape:e.exitFullscreen,right:e.next,left:e.prev}),y.crop=a.imageCrop,a.fullscreenCrop!=u&&(a.imageCrop=a.fullscreenCrop),c&&c.big&&c.image!==c.big){var b=new Galleria.Picture,k=b.isCached(c.big),p=e.getIndex(),d=e._thumbnails[p];e.trigger({type:Galleria.LOADSTART,cached:k,rewind:!1,index:p,imageTarget:e.getActiveImage(),thumbTarget:d,galleriaData:c}),b.load(c.big,function(t){e._scaleImage(t,{complete:function(t){e.trigger({type:Galleria.LOADFINISH,cached:k,index:p,rewind:!1,imageTarget:t.image,thumbTarget:d});var i=e._controls.getActive().image;i&&n(i).width(t.image.width).height(t.image.height).attr("style",n(t.image).attr("style")).attr("src",t.image.src)}})})}e.rescale(function(){e.addTimer(!1,function(){v&&t.show(e.getActiveImage()),typeof f=="function"&&f.call(e)},100),e.trigger(Galleria.FULLSCREEN_ENTER)}),v?s.resize(y.scale):t.show(e.getActiveImage())},scale:function(){e.rescale()},exit:function(n){n=y.parseCallback(n),e._options.trueFullscreen&&h.support?h.exit(n):y._exit(n)},_exit:function(n){var u,f,r;y.active=!1,u=!e._options.trueFullscreen||!h.support,e.$("container").removeClass("fullscreen"),u&&(t.hide(e.getActiveImage()),t.revertStyles(e.get("container"),o().html,o().body),i.scrollTo(0,y.scrolled)),w&&y.iframe&&(t.revertStyles(y.pd.documentElement,y.pd.body,y.iframe),y.iframe.scrolled&&i.parent.scrollTo(0,y.iframe.scrolled)),e.detachKeyboard(),e.attachKeyboard(y.keymap),e._options.imageCrop=y.crop,f=e.getData().big,r=e._controls.getActive().image,!e.getData().iframe&&r&&f&&f==r.src&&i.setTimeout(function(n){return function(){r.src=n}}(e.getData().image),1),e.rescale(function(){e.addTimer(!1,function(){u&&t.show(e.getActiveImage()),typeof n=="function"&&n.call(e),s.trigger("resize")},50),e.trigger(Galleria.FULLSCREEN_EXIT)}),s.unbind("resize",y.scale)}},p=this._idle={trunk:[],bound:!1,active:!1,add:function(t,i,r,u){if(t){p.bound||p.addEvent(),t=n(t),typeof r=="boolean"&&(u=r,r={}),r=r||{};var e={},f;for(f in i)i.hasOwnProperty(f)&&(e[f]=t.css(f));t.data("idle",{from:n.extend(e,r),to:i,complete:!0,busy:!1}),u?t.css(i):p.addTimer(),p.trunk.push(t)}},remove:function(t){t=n(t),n.each(p.trunk,function(n,i){i&&i.length&&!i.not(t).length&&(t.css(t.data("idle").from),p.trunk.splice(n,1))}),p.trunk.length||(p.removeEvent(),e.clearTimer(p.timer))},addEvent:function(){p.bound=!0,e.$("container").bind("mousemove click",p.showAll),e._options.idleMode=="hover"&&e.$("container").bind("mouseleave",p.hide)},removeEvent:function(){p.bound=!1,e.$("container").bind("mousemove click",p.showAll),e._options.idleMode=="hover"&&e.$("container").unbind("mouseleave",p.hide)},addTimer:function(){e._options.idleMode!="hover"&&e.addTimer("idle",function(){p.hide()},e._options.idleTime)},hide:function(){if(e._options.idleMode&&e.getIndex()!==!1&&!e.getData().iframe){e.trigger(Galleria.IDLE_ENTER);var i=p.trunk.length;n.each(p.trunk,function(n,r){var u=r.data("idle");u&&(r.data("idle").complete=!1,t.animate(r,u.to,{duration:e._options.idleSpeed,complete:function(){n==i-1&&(p.active=!1)}}))})}},showAll:function(){e.clearTimer("idle"),n.each(p.trunk,function(n,t){p.show(t)})},show:function(i){var r=i.data("idle");p.active&&(r.busy||r.complete)||(r.busy=!0,e.trigger(Galleria.IDLE_EXIT),e.clearTimer("idle"),t.animate(i,r.from,{duration:e._options.idleSpeed/2,complete:function(){p.active=!0,n(i).data("idle").busy=!1,n(i).data("idle").complete=!0}})),p.addTimer()}},v=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(e.trigger(Galleria.LIGHTBOX_OPEN),!v.initialized){v.initialized=!0;var i={},s=e._options,h="",r="position:absolute;",u="lightbox-",c={overlay:"position:fixed;display:none;opacity:"+s.overlayOpacity+";filter:alpha(opacity="+s.overlayOpacity*100+");top:0;left:0;width:100%;height:100%;background:"+s.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:r+"background:#000;width:100%;height:100%;",content:r+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:r+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:r+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:r+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:r+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:r+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:r+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:r+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},a=function(t){return t.hover(function(){n(this).css("color","#bbb")},function(){n(this).css("color","#444")})},l={};f&&f>7&&(c.nextholder+="background:#000;filter:alpha(opacity=0);",c.prevholder+="background:#000;filter:alpha(opacity=0);"),n.each(c,function(n,t){h+=".galleria-"+u+n+"{"+t+"}"}),h+=".galleria-"+u+"box.iframe .galleria-"+u+"prevholder,.galleria-"+u+"box.iframe .galleria-"+u+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}",t.insertStyleTag(h,"galleria-lightbox"),n.each("overlay box content shadow title info close prevholder prev nextholder next counter image".split(" "),function(n,t){e.addElement("lightbox-"+t),i[t]=v.elems[t]=e.get("lightbox-"+t)}),v.image=new Galleria.Picture,n.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var r=[];n.each(i.split(" "),function(n,t){r.push(u+t)}),l[u+t]=r}),e.append(l),n(i.image).append(v.image.container),n(o().body).append(i.overlay,i.box),t.optimizeTouch(i.box),a(n(i.close).bind("click",v.hide).html("&#215;")),n.each(["Prev","Next"],function(t,r){var u=n(i[r.toLowerCase()]).html(/v/.test(r)?"&#8249;&#160;":"&#160;&#8250;"),e=n(i[r.toLowerCase()+"holder"]);if(e.bind("click",function(){v["show"+r]()}),f<8||Galleria.TOUCH){u.show();return}e.hover(function(){u.show()},function(){u.stop().fadeOut(200)})}),n(i.overlay).bind("click",v.hide),Galleria.IPAD&&(e._options.lightboxTransitionSpeed=0)}},rescale:function(i){var h=Math.min(s.width()-40,v.width),c=Math.min(s.height()-60,v.height),r=Math.min(h/v.width,c/v.height),u=Math.round(v.width*r)+40,f=Math.round(v.height*r)+60,o={width:u,height:f,"margin-top":Math.ceil(f/2)*-1,"margin-left":Math.ceil(u/2)*-1};i?n(v.elems.box).css(o):n(v.elems.box).animate(o,{duration:e._options.lightboxTransitionSpeed,easing:e._options.easing,complete:function(){var i=v.image,r=e._options.lightboxFadeSpeed;e.trigger({type:Galleria.LIGHTBOX_IMAGE,imageTarget:i.image}),n(i.container).show(),n(i.image).animate({opacity:1},r),t.show(v.elems.info,r)}})},hide:function(){v.image.image=null,s.unbind("resize",v.rescale),n(v.elems.box).hide(),t.hide(v.elems.info),e.detachKeyboard(),e.attachKeyboard(v.keymap),v.keymap=!1,t.hide(v.elems.overlay,200,function(){n(this).hide().css("opacity",e._options.overlayOpacity),e.trigger(Galleria.LIGHTBOX_CLOSE)})},showNext:function(){v.show(e.getNext(v.active))},showPrev:function(){v.show(e.getPrev(v.active))},show:function(r){v.active=r=typeof r=="number"?r:e.getIndex()||0,v.initialized||v.init(),v.keymap||(v.keymap=n.extend({},e._keyboard.map),e.attachKeyboard({escape:v.hide,right:v.showNext,left:v.showPrev})),s.unbind("resize",v.rescale);var u=e.getData(r),l=e.getDataLength(),o=e.getNext(r),f,c,h;t.hide(v.elems.info);try{for(h=e._options.preload;h>0;h--)c=new Galleria.Picture,f=e.getData(o),c.preload("big"in f?f.big:f.image),o=e.getNext(o)}catch(a){}v.image.isIframe=!!u.iframe,n(v.elems.box).toggleClass("iframe",!!u.iframe),v.image.load(u.iframe||u.big||u.image,function(t){var f,o,h;t.isIframe?(f=n(i).width(),o=n(i).height(),e._options.maxVideoSize&&(h=Math.min(e._options.maxVideoSize/f,e._options.maxVideoSize/o),h<1&&(f*=h,o*=h)),v.width=f,v.height=o):(v.width=t.original.width,v.height=t.original.height),n(t.image).css({width:t.isIframe?"100%":"100.1%",height:t.isIframe?"100%":"100.1%",top:0,zIndex:99998,opacity:0,visibility:"visible"}),v.elems.title.innerHTML=u.title||"",v.elems.counter.innerHTML=r+1+" / "+l,s.resize(v.rescale),v.rescale()}),n(v.elems.overlay).show().css("visibility","visible"),n(v.elems.box).show()}},it=this._timer={trunk:{},add:function(n,t,r,u){if(n=n||(new Date).getTime(),u=u||!1,this.clear(n),u){var f=t;t=function(){f(),it.add(n,t,r)}}this.trunk[n]=i.setTimeout(t,r)},clear:function(n){var r=function(n){i.clearTimeout(this.trunk[n]),delete this.trunk[n]},t;if(!!n&&n in this.trunk)r.call(this,n);else if(typeof n=="undefined")for(t in this.trunk)this.trunk.hasOwnProperty(t)&&r.call(this,t)}};return this},Galleria.prototype={constructor:Galleria,init:function(t,i){var r=this;if(i=ft(i),this._original={target:t,options:i,data:null},this._target=this._dom.target=t.nodeName?t:n(t).get(0),this._original.html=this._target.innerHTML,v.push(this),!this._target){Galleria.raise("Target not found",!0);return}return this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:u,dummy:u,easing:"galleria",extend:function(){},fullscreenCrop:u,fullscreenDoubleTap:!0,fullscreenTransition:u,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:u,initialTransition:u,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:u,maxVideoSize:u,minScaleRatio:u,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:!0,thumbCrop:!0,thumbEventType:"click",thumbFit:!0,thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbnails:!0,touchTransition:u,transition:"fade",transitionInitial:u,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,i&&i.debug===!1&&(it=!1),i&&typeof i.imageTimeout=="number"&&(st=i.imageTimeout),i&&typeof i.dummy=="string"&&(b=i.dummy),n(this._target).children().hide(),Galleria.QUIRK&&Galleria.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),typeof Galleria.theme=="object"?this._init():g.push(this),this},_init:function(){var u=this,e=this._options,h,o;return this._initialized?(Galleria.raise("Init failed: Gallery instance already initialized."),this):(this._initialized=!0,!Galleria.theme)?(Galleria.raise("Init failed: No theme found.",!0),this):(n.extend(!0,e,Galleria.theme.defaults,this._original.options,Galleria.configure.options),function(n){if(!("getContext"in n)){n=null;return}c=c||{elem:n,context:n.getContext("2d"),cache:{},length:0}}(r.createElement("canvas")),this.bind(Galleria.DATA,function(){var f,n,r;this._original.data=this._data,this.get("total").innerHTML=this.getDataLength(),f=this.$("container"),u._options.height<2&&(u._userRatio=u._ratio=u._options.height),n={width:0,height:0},r=function(){return u.$("stage").height()},t.wait({until:function(){return n=u._getWH(),f.width(n.width).height(n.height),r()&&n.width&&n.height>50},success:function(){u._width=n.width,u._height=n.height,u._ratio=u._ratio||n.height/n.width,Galleria.WEBKIT?i.setTimeout(function(){u._run()},1):u._run()},error:function(){r()?Galleria.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):Galleria.raise("Could not extract a stage height from the CSS. Traced height: "+r()+"px.",!0)},timeout:typeof this._options.wait=="number"?this._options.wait:!1})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),t.hide(this.$("counter").append(this.get("current"),r.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),t.hide(u.get("tooltip")),this.$("container").addClass(Galleria.TOUCH?"touch":"notouch"),n.each(new Array(2),function(i){var r=new Galleria.Picture;n(r.container).css({position:"absolute",top:0,left:0}).prepend(u._layers[i]=n(t.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),u.$("images").append(r.container),u._controls[i]=r}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").bind("click",function(n){e.clicknext&&n.stopPropagation(),e.pauseOnInteraction&&u.pause();var t=/right/.test(this.className)?"next":"prev";u[t]()}),n.each(["info","counter","image-nav"],function(n,i){e["show"+i.substr(0,1).toUpperCase()+i.substr(1).replace(/-/,"")]===!1&&t.moveOut(u.get(i.toLowerCase()))}),this.load(),e.keepSource||f||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),e.carousel&&(h=0,o=e.show,this.bind(Galleria.THUMBNAIL,function(){this.updateCarousel(),++h==this.getDataLength()&&typeof o=="number"&&o>0&&this._carousel.follow(o)})),e.responsive&&s.bind("resize",function(){u.isFullscreen()||u.resize()}),e.swipe&&(function(n){var i=[0,0],r=[0,0],l=30,a=100,o=!1,s=0,f,e={start:"touchstart",move:"touchmove",stop:"touchend"},h=function(n){return n.originalEvent.touches?n.originalEvent.touches[0]:n},c=function(n){n.originalEvent.touches&&n.originalEvent.touches.length>1||(f=h(n),r=[f.pageX,f.pageY],i[0]||(i=r),Math.abs(i[0]-r[0])>10&&n.preventDefault())},v=function(f){if(n.unbind(e.move,c),f.originalEvent.touches&&f.originalEvent.touches.length||o){o=!o;return}t.timestamp()-s<1e3&&Math.abs(i[0]-r[0])>l&&Math.abs(i[1]-r[1])<a&&(f.preventDefault(),u[i[0]>r[0]?"next":"prev"]()),i=r=[0,0]};n.bind(e.start,function(u){if(!u.originalEvent.touches||!(u.originalEvent.touches.length>1)){f=h(u),s=t.timestamp(),i=r=[f.pageX,f.pageY];n.bind(e.move,c).one(e.stop,v)}})}(u.$("images")),e.fullscreenDoubleTap&&this.$("stage").bind("touchstart",function(){var r,n,t,f,e,i,o=function(n){return n.originalEvent.touches?n.originalEvent.touches[0]:n};return function(s){if(i=Galleria.utils.timestamp(),n=o(s).pageX,t=o(s).pageY,i-r<500&&n-f<20&&t-e<20){u.toggleFullscreen(),s.preventDefault(),u.$("stage").unbind("touchend",arguments.callee);return}r=i,f=n,e=t}}())),t.optimizeTouch(this.get("container")),n.each(Galleria.on.binds,function(t,i){n.inArray(i.hash,u._binds)==-1&&u.bind(i.type,i.callback)}),this)},addTimer:function(){return this._timer.add.apply(this._timer,t.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,t.array(arguments)),this},_getWH:function(){var f=this.$("container"),e=this.$("target"),i=this,r={},u;return n.each(["width","height"],function(n,o){i._options[o]&&typeof i._options[o]=="number"?r[o]=i._options[o]:(u=[t.parseValue(f.css(o)),t.parseValue(e.css(o)),f[o](),e[o]()],i["_"+o]||u.splice(u.length,t.parseValue(f.css("min-"+o)),t.parseValue(e.css("min-"+o))),r[o]=Math.max.apply(Math,u))}),i._userRatio&&(r.height=r.width*i._userRatio),r},_createThumbnails:function(u){this.get("total").innerHTML=this.getDataLength();var a,e,c,y,l,h=this,o=this._options,s=u?this._data.length-u.length:0,tt=s,k=[],d=0,g=f<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",it=function(){var n=h.$("thumbnails").find(".active");return n.length?n.find("img").attr("src"):!1}(),v=typeof o.thumbnails=="string"?o.thumbnails.toLowerCase():null,nt=function(n){return r.defaultView&&r.defaultView.getComputedStyle?r.defaultView.getComputedStyle(e.container,null)[n]:l.css(n)},rt=function(t,i,r){return function(){n(r).append(t),h.trigger({type:Galleria.THUMBNAIL,thumbTarget:t,index:i,galleriaData:h.getData(i)})}},ut=function(t){o.pauseOnInteraction&&h.pause();var i=n(t.currentTarget).data("index");h.getIndex()!==i&&h.show(i),t.preventDefault()},w=function(t,i){n(t.container).css("visibility","visible"),h.trigger({type:Galleria.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:h.getData(t.data.order)}),typeof i=="function"&&i.call(h,t)},b=function(i,r){i.scale({width:i.data.width,height:i.data.height,crop:o.thumbCrop,margin:o.thumbMargin,canvas:o.useCanvas,complete:function(i){var c=["left","top"],f,u,s=h.getData(i.index),e=s.thumb.split(":");n.each(["Width","Height"],function(t,r){f=r.toLowerCase(),(o.thumbCrop!==!0||o.thumbCrop===f)&&o.thumbFit&&(u={},u[f]=i[f],n(i.container).css(u),u={},u[c[t]]=0,n(i.image).css(u)),i["outer"+r]=n(i.container)["outer"+r](!0)}),t.toggleQuality(i.image,o.thumbQuality===!0||o.thumbQuality==="auto"&&i.original.width<i.width*3),s.iframe&&e.length==2&&e[0]in p?p[e[0]].getThumb(e[1],function(n){return function(t){n.src=t,w(i,r)}}(i.image)):o.thumbDisplayOrder&&!i.lazy?n.each(k,function(n,t){if(n===d&&t.ready&&!t.displayed){d++,t.displayed=!0,w(t,r);return}}):w(i,r)}})};for(u||(this._thumbnails=[],this.$("thumbnails").empty());this._data[s];s++)c=this._data[s],a=c.thumb||c.image,(o.thumbnails===!0||v=="lazy")&&(c.thumb||c.image)?(e=new Galleria.Picture(s),e.index=s,e.displayed=!1,e.lazy=!1,e.video=!1,this.$("thumbnails").append(e.container),l=n(e.container),l.css("visibility","hidden"),e.data={width:t.parseValue(nt("width")),height:t.parseValue(nt("height")),order:s,src:a},o.thumbFit&&o.thumbCrop!==!0?l.css({width:"auto",height:"auto"}):l.css({width:e.data.width,height:e.data.height}),y=a.split(":"),y.length==2&&y[0]in p?(e.video=!0,e.ready=!0,e.load(g,{height:e.data.height,width:e.data.height*1.25},b)):v=="lazy"?(l.addClass("lazy"),e.lazy=!0,e.load(g,{height:e.data.height,width:e.data.width})):e.load(a,b),o.preload==="all"&&e.preload(c.image)):c.iframe||v==="empty"||v==="numbers"?(e={container:t.create("galleria-image"),image:t.create("img","span"),ready:!0},v==="numbers"&&n(e.image).text(s+1),c.iframe&&n(e.image).addClass("iframe"),this.$("thumbnails").append(e.container),i.setTimeout(rt(e.image,s,e.container),50+s*20)):e={container:null,image:null},n(e.container).add(o.keepSource&&o.linkSourceImages?c.original:null).data("index",s).bind(o.thumbEventType,ut).data("thumbload",b),it===a&&n(e.container).addClass("active"),this._thumbnails.push(e);return k=this._thumbnails.slice(tt),this},lazyLoad:function(t,i){var u=t.constructor==Array?t:[t],r=this,e=this.$("thumbnails").children().filter(function(){return n(this).data("lazy-src")}),f=0;return n.each(u,function(t,e){if(!(e>r._thumbnails.length-1)){var o=r._thumbnails[e],s=o.data,l=s.src.split(":"),h=function(){++f==u.length&&typeof i=="function"&&i.call(r)},c=n(o.container).data("thumbload");o.video?c.call(r,o,h):o.load(s.src,function(n){c.call(r,n,h)})}}),this},lazyLoadChunks:function(n,t){var e=this.getDataLength(),r=0,o=0,s=[],u=[],h=this,f;for(t=t||0;r<e;r++)u.push(r),(++o==n||r==e-1)&&(s.push(u),o=0,u=[]);return f=function(n){var r=s.shift();r&&i.setTimeout(function(){h.lazyLoad(r,function(){f(!0)})},t&&n?t:0)},f(!1),this},_run:function(){var r=this;r._createThumbnails(),t.wait({timeout:1e4,until:function(){return Galleria.OPERA&&r.$("stage").css("display","inline-block"),r._stageWidth=r.$("stage").width(),r._stageHeight=r.$("stage").height(),r._stageWidth&&r._stageHeight>50},success:function(){if(d.push(r),t.show(r.get("counter")),r._options.carousel&&r._carousel.bindControls(),r._options.autoplay&&(r.pause(),typeof r._options.autoplay=="number"&&(r._playtime=r._options.autoplay),r._playing=!0),r._firstrun){r._options.autoplay&&r.trigger(Galleria.PLAY),typeof r._options.show=="number"&&r.show(r._options.show);return}r._firstrun=!0,Galleria.History&&Galleria.History.change(function(n){isNaN(n)?i.history.go(-1):r.show(n,u,!0)}),r.trigger(Galleria.READY),Galleria.theme.init.call(r,r._options),n.each(Galleria.ready.callbacks,function(n,t){typeof t=="function"&&t.call(r,r._options)}),r._options.extend.call(r,r._options),/^[0-9]{1,4}$/.test(rt)&&Galleria.History?r.show(rt,u,!0):r._data[r._options.show]&&r.show(r._options.show),r._options.autoplay&&r.trigger(Galleria.PLAY)},error:function(){Galleria.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+r._stageWidth+"px, height: "+r._stageHeight+"px.",!0)}})},load:function(t,i,r){var f=this,u=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),typeof i=="function"&&(r=i,i=null),t=t||u.dataSource,i=i||u.dataSelector,r=r||u.dataConfig,/^function Object/.test(t.constructor)&&(t=[t]),t.constructor===Array?this.validate(t)?this._data=t:Galleria.raise("Load failed: JSON Array not valid."):(i+=",.video,.iframe",n(t).find(i).each(function(t,i){i=n(i);var u={},o=i.parent(),e=o.attr("href"),s=o.attr("rel");e&&(i[0].nodeName=="IMG"||i.hasClass("video"))&&et(e)?u.video=e:e&&i.hasClass("iframe")?u.iframe=e:u.image=u.big=e,s&&(u.big=s),n.each("big title description link layer".split(" "),function(n,t){i.data(t)&&(u[t]=i.data(t))}),f._data.push(n.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},u,r(i)))})),typeof u.dataSort=="function"?y.sort.call(this._data,u.dataSort):u.dataSort=="random"&&this._data.sort(function(){return Math.round(Math.random())-.5}),this.getDataLength()&&this._parseData().trigger(Galleria.DATA),this},_parseData:function(){var i=this,t;return n.each(this._data,function(r,u){if(t=i._data[r],"thumb"in u==!1&&(t.thumb=u.image),!1 in u&&(t.big=u.image),"video"in u){var f=et(u.video);f&&(t.iframe=p[f.provider].embed(f.id)+function(){if(typeof i._options[f.provider]=="object"){var t=[];return n.each(i._options[f.provider],function(n,i){t.push(n+"="+i)}),f.provider=="youtube"&&(t=["wmode=opaque"].concat(t)),"?"+t.join("&")}return""}(),delete t.video,"thumb"in t&&t.thumb||(t.thumb=f.provider+":"+f.id))}}),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").unbind("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),t.removeFromArray(v,this),t.removeFromArray(d,this),this},splice:function(){var n=this,r=t.array(arguments);return i.setTimeout(function(){y.splice.apply(n._data,r),n._parseData()._createThumbnails()},2),n},push:function(){var r=this,n=t.array(arguments);return n.length==1&&n[0].constructor==Array&&(n=n[0]),i.setTimeout(function(){y.push.apply(r._data,n),r._parseData()._createThumbnails(n)},2),r},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(n,t){return n=k(n),this.$("container").bind(n,this.proxy(t)),this},unbind:function(n){return n=k(n),this.$("container").unbind(n),this},trigger:function(t){return t=typeof t=="object"?n.extend(t,{scope:this}):{type:k(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,t.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,t.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,t.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,t.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,t.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,t.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,t.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,t.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,t.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,t.array(arguments)),this},getActiveImage:function(){return this._getActive().image||u},getActiveThumb:function(){return this._thumbnails[this._active].image||u},getMousePosition:function(n){return{x:n.pageX-this.$("container").offset().left,y:n.pageY-this.$("container").offset().top}},addPan:function(i){if(this._options.imageCrop!==!1){i=n(i||this.getActiveImage());var r=this,a=i.width()/2,v=i.height()/2,s=parseInt(i.css("left"),10),h=parseInt(i.css("top"),10),e=s||0,o=h||0,c=0,l=0,y=!1,k=t.timestamp(),p=0,u=0,w=function(n,t,r){if(n>0&&(u=Math.round(Math.max(n*-1,Math.min(0,t))),p!==u))if(p=u,f===8)i.parent()["scroll"+r](u*-1);else{var e={};e[r.toLowerCase()]=u,i.css(e)}},b=function(n){t.timestamp()-k<50||(y=!0,a=r.getMousePosition(n).x,v=r.getMousePosition(n).y)},d=function(){y&&(c=i.width()-r._stageWidth,l=i.height()-r._stageHeight,s=a/r._stageWidth*c*-1,h=v/r._stageHeight*l*-1,e+=(s-e)/r._options.imagePanSmoothness,o+=(h-o)/r._options.imagePanSmoothness,w(l,o,"Top"),w(c,e,"Left"))};return f===8&&(i.parent().scrollTop(o*-1).scrollLeft(e*-1),i.css({top:0,left:0})),this.$("stage").unbind("mousemove",b).bind("mousemove",b),this.addTimer("pan"+r._id,d,50,!0),this}},proxy:function(n,i){return typeof n!="function"?e:(i=i||this,function(){return n.apply(i,t.array(arguments))})},removePan:function(){return this.$("stage").unbind("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(){var i=this._dom;return n.each(t.array(arguments),function(n,r){i[r]=t.create("galleria-"+r)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,t.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,t.array(arguments)),this},appendChild:function(n,t){return this.$(n).append(this.get(t)||t),this},prependChild:function(n,t){return this.$(n).prepend(this.get(t)||t),this},remove:function(){return this.$(t.array(arguments).join(",")).remove(),this},append:function(n){var t,i;for(t in n)if(n.hasOwnProperty(t))if(n[t].constructor===Array)for(i=0;n[t][i];i++)this.appendChild(t,n[t][i]);else this.appendChild(t,n[t]);return this},_scaleImage:function(i,r){if(i=i||this._controls.getActive(),i){var e=this,u,f=function(i){n(i.container).children(":first").css({top:Math.max(0,t.parseValue(i.image.style.top)),left:Math.max(0,t.parseValue(i.image.style.left)),width:t.parseValue(i.image.width),height:t.parseValue(i.image.height)})};return r=n.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},r),this._options.layerFollow&&this._options.imageCrop!==!0?typeof r.complete=="function"?(u=r.complete,r.complete=function(){u.call(i,i),f(i)}):r.complete=f:n(i.container).children(":first").css({top:0,left:0}),i.scale(r),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,i){typeof t=="function"&&(i=t,t=u),t=n.extend({width:0,height:0},t);var f=this,r=this.$("container");return n.each(t,function(n,i){i||(r[n]("auto"),t[n]=f._getWH()[n])}),n.each(t,function(n,t){r[n](t)}),this.rescale(i)},rescale:function(n,t,i){var r=this,f;return typeof n=="function"&&(i=n,n=u),f=function(){r._stageWidth=n||r.$("stage").width(),r._stageHeight=t||r.$("stage").height(),r._scaleImage(),r._options.carousel&&r.updateCarousel(),r.trigger(Galleria.RESCALE),typeof i=="function"&&i.call(r)},f.call(r),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},show:function(n,t,i){if(!(this._queue.length>3)&&n!==!1&&(this._options.queue||!this._queue.stalled)){if(n=Math.max(0,Math.min(parseInt(n,10),this.getDataLength()-1)),t=typeof t!="undefined"?!!t:n<this.getIndex(),i=i||!1,!i&&Galleria.History){Galleria.History.set(n.toString());return}return this._active=n,y.push.call(this._queue,{index:n,rewind:t}),this._queue.stalled||this._show(),this}},_show:function(){var r=this,f=this._queue[0],e=this.getData(f.index),k,l,h,c;if(e){var v=e.iframe||(this.isFullscreen()&&"big"in e?e.big:e.image),s=this._controls.getActive(),o=this._controls.getNext(),p=o.isCached(v),w=this._thumbnails[f.index],d=function(){n(o.image).trigger("mouseup")},b=function(u,f,e,o,s){return function(){var h;a.active=!1,t.toggleQuality(f.image,r._options.imageQuality),r._layers[r._controls.active].innerHTML="",n(e.container).css({zIndex:0,opacity:0}).show(),e.isIframe&&n(e.container).find("iframe").remove(),r.$("container").toggleClass("iframe",!!u.iframe),n(f.container).css({zIndex:1,left:0,top:0}).show(),r._controls.swap(),r._options.imagePan&&r.addPan(f.image),(u.link||r._options.lightbox||r._options.clicknext)&&n(f.image).css({cursor:"pointer"}).bind("mouseup",function(n){if(typeof n.which!="number"||!(n.which>1)){if(r._options.clicknext&&!Galleria.TOUCH){r._options.pauseOnInteraction&&r.pause(),r.next();return}if(u.link){r._options.popupLinks?h=i.open(u.link,"_blank"):i.location.href=u.link;return}r._options.lightbox&&r.openLightbox()}}),r._playCheck(),r.trigger({type:Galleria.IMAGE,index:o.index,imageTarget:f.image,thumbTarget:s.image,galleriaData:u}),y.shift.call(r._queue),r._queue.stalled=!1,r._queue.length&&r._show()}}(e,o,s,f,w);if(this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(f.index),this._options.preload){h=this.getNext();try{for(l=this._options.preload;l>0;l--)k=new Galleria.Picture,c=r.getData(h),k.preload(this.isFullscreen()&&"big"in c?c.big:c.image),h=r.getNext(h)}catch(g){}}t.show(o.container),o.isIframe=!!e.iframe,n(r._thumbnails[f.index].container).addClass("active").siblings(".active").removeClass("active"),r.trigger({type:Galleria.LOADSTART,cached:p,index:f.index,rewind:f.rewind,imageTarget:o.image,thumbTarget:w.image,galleriaData:e}),r._queue.stalled=!0,o.load(v,function(i){var o=n(r._layers[1-r._controls.active]).html(e.layer||"").hide();r._scaleImage(i,{complete:function(i){var h,c;"image"in s&&t.toggleQuality(s.image,!1),t.toggleQuality(i.image,!1),r.removePan(),r.setInfo(f.index),r.setCounter(f.index),e.layer&&(o.show(),(e.link||r._options.lightbox||r._options.clicknext)&&o.css("cursor","pointer").unbind("mouseup").mouseup(d)),h=r._options.transition,n.each({initial:s.image===null,touch:Galleria.TOUCH,fullscreen:r.isFullscreen()},function(n,t){if(t&&r._options[n+"Transition"]!==u)return h=r._options[n+"Transition"],!1}),h in a.effects==!1?b():(c={prev:s.container,next:i.container,rewind:f.rewind,speed:r._options.transitionSpeed||400},a.active=!0,a.init.call(r,h,c,b)),r.trigger({type:Galleria.LOADFINISH,cached:p,index:f.index,rewind:f.rewind,imageTarget:i.image,thumbTarget:r._thumbnails[f.index].image,galleriaData:r.getData(f.index)})}})})}},getNext:function(n){return n=typeof n=="number"?n:this.getIndex(),n===this.getDataLength()-1?0:n+1},getPrev:function(n){return n=typeof n=="number"?n:this.getIndex(),n===0?this.getDataLength()-1:n-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(n){return n in this._dom?this._dom[n]:null},getData:function(n){return n in this._data?this._data[n]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active=="number"?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(n){return typeof n=="undefined"?this._options:this._options[n]},setOptions:function(t,i){return typeof t=="object"?n.extend(this._options,t):this._options[t]=i,this},play:function(n){return this._playing=!0,this._playtime=n||this._playtime,this._playCheck(),this.trigger(Galleria.PLAY),this},pause:function(){return this._playing=!1,this.trigger(Galleria.PAUSE),this},playToggle:function(n){return this._playing?this.pause():this.play(n)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var n=this,i=0,f=20,e=t.timestamp(),r="play"+this._id,u;this._playing&&(this.clearTimer(r),u=function(){if(i=t.timestamp()-e,i>=n._playtime&&n._playing){n.clearTimer(r),n.next();return}n._playing&&(n.trigger({type:Galleria.PROGRESS,percent:Math.ceil(i/n._playtime*100),seconds:Math.floor(i/1e3),milliseconds:i}),n.addTimer(r,u,f))},n.addTimer(r,u,f))},setPlaytime:function(n){return this._playtime=n,this},setIndex:function(n){return this._active=n,this},setCounter:function(n){if(typeof n=="number"?n++:typeof n=="undefined"&&(n=this.getIndex()+1),this.get("current").innerHTML=n,f){var i=this.$("counter"),r=i.css("opacity");parseInt(r,10)===1?t.removeAlpha(i[0]):this.$("counter").css("opacity",r)}return this},setInfo:function(t){var r=this,i=this.getData(t);return n.each(["title","description"],function(n,t){var u=r.$("info-"+t);i[t]?u[i[t].length?"show":"hide"]().html(i[t]):u.empty().hide()}),this},hasInfo:function(n){for(var i="title description".split(" "),t=0;i[t];t++)if(!!this.getData(n)[i[t]])return!0;return!1},jQuery:function(t){var r=this,u=[],i;return n.each(t.split(","),function(t,i){i=n.trim(i),r.get(i)&&u.push(i)}),i=n(r.get(u.shift())),n.each(u,function(n,t){i=i.add(r.get(t))}),i},$:function(){return this.jQuery.apply(this,t.array(arguments))}},n.each(ut,function(n,t){var i=/_/.test(t)?t.replace(/_/g,""):t;Galleria[t.toUpperCase()]="galleria."+i}),n.extend(Galleria,{IE9:f===9,IE8:f===8,IE7:f===7,IE6:f===6,IE:f,WEBKIT:/webkit/.test(l),CHROME:/chrome/.test(l),SAFARI:/safari/.test(l)&&!/chrome/.test(l),QUIRK:f&&r.compatMode&&r.compatMode==="BackCompat",MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!i.opera,IPHONE:/iphone/.test(l),IPAD:/ipad/.test(l),ANDROID:/android/.test(l),TOUCH:"ontouchstart"in r}),Galleria.addTheme=function(r){r.name||Galleria.raise("No theme name specified"),r.defaults=typeof r.defaults!="object"?{}:ft(r.defaults);var u=!1,f;return typeof r.css=="string"?(n("link").each(function(n,t){return f=new RegExp(r.css),f.test(t.href)?(u=!0,nt(r),!1):void 0}),u||n("script").each(function(n,e){f=new RegExp("galleria\\."+r.name.toLowerCase()+"\\."),f.test(e.src)&&(u=e.src.replace(/[^\/]*$/,"")+r.css,i.setTimeout(function(){t.loadCSS(u,"galleria-theme",function(){nt(r)})},1))}),u||Galleria.raise("No theme CSS loaded")):nt(r),r},Galleria.loadTheme=function(r){if(!n("script").filter(function(){return n(this).attr("src")==r}).length){var u=!1,f;return n(i).load(function(){u||(f=i.setTimeout(function(){u||Galleria.theme||Galleria.raise("Galleria had problems loading theme at "+r+". Please check theme path or load manually.",!0)},2e4))}),Galleria.unloadTheme(),t.loadScript(r,function(){u=!0,i.clearTimeout(f)}),Galleria}},Galleria.unloadTheme=function(){return typeof Galleria.theme=="object"&&(n("script").each(function(t,i){new RegExp("galleria\\."+Galleria.theme.name+"\\.").test(i.src)&&n(i).remove()}),Galleria.theme=u),Galleria},Galleria.get=function(n){if(!v[n]){if(typeof n!="number")return v;Galleria.raise("Gallery index "+n+" not found")}else return v[n]},Galleria.configure=function(t,i){var r={};return typeof t=="string"&&i?(r[t]=i,t=r):n.extend(r,t),Galleria.configure.options=r,n.each(Galleria.get(),function(n,t){t.setOptions(r)}),Galleria},Galleria.configure.options={},Galleria.on=function(i,r){if(i){r=r||e;var u=i+r.toString().replace(/\s/g,"")+t.timestamp();return n.each(Galleria.get(),function(n,t){t._binds.push(u),t.bind(i,r)}),Galleria.on.binds.push({type:i,callback:r,hash:u}),Galleria}},Galleria.on.binds=[],Galleria.run=function(t,i){return n.isFunction(i)&&(i={extend:i}),n(t||"#galleria").galleria(i),Galleria},Galleria.addTransition=function(n,t){return a.effects[n]=t,Galleria},Galleria.utils=t,Galleria.log=function(){var r=t.array(arguments);if("console"in i&&"log"in i.console)try{return i.console.log.apply(i.console,r)}catch(u){n.each(r,function(){i.console.log(this)})}else return i.alert(r.join("<br>"))},Galleria.ready=function(t){return typeof t!="function"?Galleria:(n.each(d,function(n,i){t.call(i,i._options)}),Galleria.ready.callbacks.push(t),Galleria)},Galleria.ready.callbacks=[],Galleria.raise=function(t,i){var r=i?"Fatal error":"Error",e=this,u={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},f=function(t){var f='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+r+": <\/strong>":"")+t+"<\/div>";n.each(v,function(){var n=this.$("errors"),t=this.$("target");n.length||(t.css("position","relative"),n=this.addElement("errors").appendChild("target","errors").$("errors").css(u)),n.append(f)}),v.length||n("<div>").css(n.extend(u,{position:"fixed"})).append(f).appendTo(o().body)};if(it){if(f(t),i)throw new Error(r+": "+t);}else if(i){if(ot)return;ot=!0,i=!1,f("Gallery could not load.")}},Galleria.version=1.29,Galleria.requires=function(n,t){return t=t||"You need to upgrade Galleria to version "+n+" to use one or more components.",Galleria.version<n&&Galleria.raise(t,!0),Galleria},Galleria.Picture=function(i){this.id=i||null,this.image=null,this.container=t.create("galleria-image"),n(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},Galleria.Picture.prototype={cache:{},show:function(){t.show(this.image)},hide:function(){t.moveOut(this.image)},clear:function(){this.image=null},isCached:function(n){return!!this.cache[n]},preload:function(t){n(new Image).load(function(n,t){return function(){t[n]=n}}(t,this.cache)).attr("src",t)},load:function(r,u,f){var e;if(typeof u=="function"&&(f=u,u=null),this.isIframe)return e="if"+(new Date).getTime(),this.image=n("<iframe>",{src:r,frameborder:0,id:e,allowfullscreen:!0,css:{visibility:"hidden"}})[0],n(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),n("#"+e).load(function(t,r){return function(){i.setTimeout(function(){n(t.image).css("visibility","visible"),typeof r=="function"&&r.call(t,t)},10)}}(this,f)),this.container;this.image=new Image,Galleria.IE8&&n(this.image).css("filter","inherit");var s=!1,h=!1,l=n(this.container),o=n(this.image),a=function(){s?b?n(this).attr("src",b):Galleria.raise("Image not found: "+r):(s=!0,i.setTimeout(function(n,i){return function(){n.attr("src",i+"?"+t.timestamp())}}(n(this),r),50))},c=function(t,r,f){return function(){var e=function(){n(this).unbind("load"),t.original=u||{height:this.height,width:this.width},t.container.appendChild(this),t.cache[f]=f,typeof r=="function"&&i.setTimeout(function(){r.call(t,t)},1)};this.width&&this.height?e.call(this):i.setTimeout(function(t){return function(){t.width&&t.height?e.call(t):h?Galleria.raise("Could not extract width/height from image: "+t.src+". Traced measures: width:"+t.width+"px, height: "+t.height+"px."):(n(new Image).load(c).attr("src",t.src),h=!0)}}(this),2)}}(this,f,r);return l.find("iframe,img").remove(),o.css("display","block"),t.hide(this.image),n.each("minWidth minHeight maxWidth maxHeight".split(" "),function(n,t){o.css(t,/min/.test(t)?"0":"none")}),o.load(c).error(a).attr("src",r),this.container},scale:function(i){var r=this,f,o,y,p,a,s,h,l,v;if(i=n.extend({width:0,height:0,min:u,max:u,margin:0,complete:e,position:"center",crop:!1,canvas:!1,iframelimit:u},i),this.isIframe){f=i.width,o=i.height,i.iframelimit&&(a=Math.min(i.iframelimit/f,i.iframelimit/o),a<1?(y=f*a,p=o*a,n(this.image).css({top:o/2-p/2,left:f/2-y/2,position:"absolute"})):n(this.image).css({top:0,left:0})),n(this.image).width(y||f).height(p||o).removeAttr("width").removeAttr("height"),n(this.container).width(f).height(o),i.complete.call(r,r);try{this.image.contentWindow&&n(this.image.contentWindow).trigger("resize")}catch(w){}return this.container}return this.image?(l=n(r.container),t.wait({until:function(){return s=i.width||l.width()||t.parseValue(l.css("width")),h=i.height||l.height()||t.parseValue(l.css("height")),s&&h},success:function(){var e=(s-i.margin*2)/r.original.width,o=(h-i.margin*2)/r.original.height,l=Math.min(e,o),a=Math.max(e,o),k={"true":a,width:e,height:o,"false":l,landscape:r.original.width>r.original.height?a:l,portrait:r.original.width<r.original.height?a:l},f=k[i.crop.toString()],y="";i.max&&(f=Math.min(i.max,f)),i.min&&(f=Math.max(i.min,f)),n.each(["width","height"],function(t,i){n(r.image)[i](r[i]=r.image[i]=Math.round(r.original[i]*f))}),n(r.container).width(s).height(h),i.canvas&&c&&(c.elem.width=r.width,c.elem.height=r.height,y=r.image.src+":"+r.width+"x"+r.height,r.image.src=c.cache[y]||function(n){c.context.drawImage(r.image,0,0,r.original.width*f,r.original.height*f);try{return v=c.elem.toDataURL(),c.length+=v.length,c.cache[n]=v,v}catch(t){return r.image.src}}(y));var u={},p={},w=function(i,u,f){var e=0,o,s;return/\%/.test(i)?(o=parseInt(i,10)/100,s=r.image[u]||n(r.image)[u](),e=Math.ceil(s*-1*o+f*o)):e=t.parseValue(i),e},b={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};n.each(i.position.toLowerCase().split(" "),function(n,t){t==="center"&&(t="50%"),u[n?"top":"left"]=t}),n.each(u,function(t,i){b.hasOwnProperty(i)&&n.extend(p,b[i])}),u=u.top?n.extend(u,p):p,u=n.extend({top:"50%",left:"50%"},u),n(r.image).css({position:"absolute",top:w(u.top,"height",h),left:w(u.left,"width",s)}),r.show(),r.ready=!0,i.complete.call(r,r)},error:function(){Galleria.raise("Could not scale image: "+r.image.src)},timeout:1e3}),this):this.container}},n.extend(n.easing,{galleria:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},galleriaIn:function(n,t,i,r,u){return r*(t/=u)*t+i},galleriaOut:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i}}),n.fn.galleria=function(t){var i=this.selector;return n(this).length?this.each(function(){n.data(this,"galleria")&&(n.data(this,"galleria").destroy(),n(this).find("*").hide()),n.data(this,"galleria",(new Galleria).init(this,t))}):(n(function(){n(i).length?n(i).galleria(t):Galleria.utils.wait({until:function(){return n(i).length},success:function(){n(i).galleria(t)},error:function(){Galleria.raise('Init failed: Galleria could not find the element "'+i+'".')},timeout:5e3})}),this)}})(jQuery);
//@ sourceMappingURL=galleria-1.2.9.min.js.map